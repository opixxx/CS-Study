## 2-Phase Locking Protocol : 2PL
트랜잭션의 직렬 가능성을 보장하기 위해 잠금을 설정하는 단계와 해제하는 단계로 나누어 수행한다.
- 확장 단계 : 트랜잭션이 lock 연산만 실행할 수 있고, unlock 연산은 실행할 수 없는 단계
- 축소 단계 : 트랜잭션이 unlock 연산만 실행할 수 있고, lock 연산은 실행할 수 없는 단계

트랜잭션이 처음 수행되면 확장 단계로 들어가 lock 연산만 실행할 수 있다. 그러다가 unlock 연산을 실행하면 축소 단계로 들어가 그때부터는 unlock 연산만 실행할 수 있다. 2PL을 준수하는 트랜잭션은 첫 번째 unlock 연산이 실행되기전에 필요한 lock 연산을 모두 실행해야 한다.

<img width="650" alt="스크린샷 2025-02-26 오후 6 16 48" src="https://github.com/user-attachments/assets/d4fde76b-67bd-42d5-a8e4-1609928fae55" />

위 그림과 같이 2PL은 트랜잭션 스케줄의 직렬 가능성을 보장해주지만 데드락이 발생할 수 있고, 연쇄 복귀 문제도 발생할 수 있다. (Dirty Read가 발생하기 때문에)

## Strict 2-Phase Locking Protocol : strict 2PL
모든 X-lock에 대한 unlock 연산을 트랜잭션이 완전히 완료된 후에 실행하는 것이다.
- 확장 단계 : 2PL과 동일
- 축소 단계 : 트랜잭션이 커밋 또는 롤백 될 때까지 X-lock을 해제하지 않음

완료되지 않는 트랜잭션에 의해 갱신된 데이터를 다른 트랜잭션이 읽거나 쓸 가능성을 막을 수 있어 연쇄 복귀 문제를 해결할 수 있다. (Dirty Read를 방지하기 때문에)
